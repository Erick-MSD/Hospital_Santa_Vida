<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<AnchorPane prefHeight="900.0" prefWidth="1400.0" style="-fx-background-color: #F5F3F0;" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.RegistroPacienteController">
   <children>
      <!-- Header -->
      <HBox alignment="CENTER_LEFT" prefHeight="90.0" spacing="20.0" style="-fx-background-color: #FFFFFF; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 3);" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
         <children>
            <!-- Logo oficial del hospital -->
            <ImageView fitHeight="60.0" fitWidth="60.0" preserveRatio="true">
               <image>
                  <Image url="/assets/img/Hospital_santa_vida.png" />
               </image>
               <HBox.margin>
                  <Insets left="30.0" />
               </HBox.margin>
            </ImageView>
            
            <VBox alignment="CENTER_LEFT" spacing="2.0">
               <children>
                  <Label text="SANTA VIDA" style="-fx-font-weight: bold; -fx-font-size: 22px; -fx-text-fill: #2E5984;"/>
                  <Label text="HOSPITAL PRIVADO" style="-fx-font-size: 13px; -fx-text-fill: #7A7A7A;"/>
               </children>
            </VBox>
            
            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS" />
            
            <!-- User Info -->
            <HBox alignment="CENTER_RIGHT" spacing="15.0">
               <children>
                  <VBox alignment="CENTER_RIGHT" spacing="2.0">
                     <children>
                        <Label fx:id="lblUsuarioNombre" text="Asistente Médica" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #2E5984;"/>
                        <Label text="Registro de Pacientes" style="-fx-font-size: 13px; -fx-text-fill: #7A7A7A;"/>
                     </children>
                  </VBox>
                  <Label text="👩‍⚕️" style="-fx-font-size: 28px;"/>
               </children>
               <HBox.margin>
                  <Insets right="30.0" />
               </HBox.margin>
            </HBox>
         </children>
      </HBox>

      <!-- Main Content -->
      <ScrollPane fitToWidth="true" style="-fx-background: #F5F3F0; -fx-border-color: transparent;" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="90.0">
         <content>
            <HBox spacing="30.0" style="-fx-background-color: #F5F3F0;">
               <padding>
                  <Insets bottom="30.0" left="40.0" right="40.0" top="30.0" />
               </padding>
               <children>
                  <!-- Formulario Principal -->
                  <VBox prefWidth="750.0" spacing="25.0" style="-fx-background-color: #FFFFFF; -fx-background-radius: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 12, 0, 0, 4);">
                     <padding>
                        <Insets bottom="35.0" left="35.0" right="35.0" top="35.0" />
                     </padding>
                     <children>
                        <!-- Título -->
                        <HBox alignment="CENTER_LEFT" spacing="15.0">
                           <children>
                              <Label text="👤" style="-fx-font-size: 24px;"/>
                              <VBox spacing="3.0">
                                 <children>
                                    <Label text="Registro de Paciente" style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: #2E5984;"/>
                                    <Label text="Complete la información del paciente para proceder con el triage" style="-fx-font-size: 14px; -fx-text-fill: #7A7A7A;"/>
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                        
                        <!-- Sección 1: Datos del Paciente -->
                        <VBox spacing="18.0" style="-fx-background-color: #F8F9FA; -fx-background-radius: 10; -fx-padding: 25;">
                           <children>
                              <HBox alignment="CENTER_LEFT" spacing="10.0">
                                 <children>
                                    <Label text="📋" style="-fx-font-size: 18px;"/>
                                    <Label text="Datos del Paciente" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2E5984;"/>
                                 </children>
                              </HBox>
                              
                              <!-- Fila 1: Nombre y Apellidos -->
                              <HBox spacing="15.0">
                                 <children>
                                    <VBox spacing="8.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Nombre(s) *" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-text-fill: #2E5984;"/>
                                          <TextField fx:id="txtNombre" promptText="Nombres completos del paciente" style="-fx-pref-height: 40px; -fx-background-color: #FFFFFF; -fx-border-color: #E0E0E0; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 12; -fx-font-size: 14px;"/>
                                       </children>
                                    </VBox>
                                    <VBox spacing="8.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Apellidos *" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-text-fill: #2E5984;"/>
                                          <HBox spacing="12.0">
                                             <children>
                                                <TextField fx:id="txtApellidoPaterno" promptText="Paterno" style="-fx-pref-height: 40px; -fx-background-color: #FFFFFF; -fx-border-color: #E0E0E0; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 12; -fx-font-size: 14px;" HBox.hgrow="ALWAYS"/>
                                                <TextField fx:id="txtApellidoMaterno" promptText="Materno" style="-fx-pref-height: 40px; -fx-background-color: #FFFFFF; -fx-border-color: #E0E0E0; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 12; -fx-font-size: 14px;" HBox.hgrow="ALWAYS"/>
                                             </children>
                                          </HBox>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                              
                              <!-- Fila 2: Fecha Nacimiento, Edad, Sexo -->
                              <HBox spacing="20.0">
                                 <children>
                                    <VBox spacing="8.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Fecha de Nacimiento *" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-text-fill: #2E5984;"/>
                                          <DatePicker fx:id="dpFechaNacimiento" promptText="dd/mm/yyyy" style="-fx-pref-height: 40px; -fx-background-color: #FFFFFF; -fx-border-color: #E0E0E0; -fx-border-radius: 8; -fx-background-radius: 8;"/>
                                       </children>
                                    </VBox>
                                    <VBox spacing="8.0">
                                       <children>
                                          <Label text="Edad" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-text-fill: #2E5984;"/>
                                          <TextField fx:id="txtEdad" promptText="Años" style="-fx-pref-height: 40px; -fx-background-color: #F8F8F8; -fx-border-color: #E0E0E0; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 12; -fx-font-size: 14px;" prefWidth="90" editable="false"/>
                                       </children>
                                    </VBox>
                                    <VBox spacing="8.0">
                                       <children>
                                          <Label text="Sexo *" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-text-fill: #2E5984;"/>
                                          <ComboBox fx:id="cmbSexo" promptText="Seleccionar" style="-fx-pref-height: 40px; -fx-background-color: #FFFFFF; -fx-border-color: #E0E0E0; -fx-border-radius: 8; -fx-background-radius: 8;" prefWidth="160"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                              
                              <!-- CURP -->
                              <VBox spacing="5.0">
                                 <children>
                                    <Label text="CURP *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                    <TextField fx:id="txtCurp" promptText="18 caracteres" style="-fx-pref-height: 35px;" maxWidth="400"/>
                                 </children>
                              </VBox>
                           </children>
                        </VBox>

                        <!-- Sección 2: Información de Contacto -->
                        <VBox spacing="15.0">
                           <children>
                              <Label text="📞 Información de Contacto" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                              
                              <!-- Teléfonos -->
                              <HBox spacing="15.0">
                                 <children>
                                    <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Teléfono Principal *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <TextField fx:id="txtTelefonoPrincipal" promptText="+52 (81) 1234-5678" style="-fx-pref-height: 35px;"/>
                                       </children>
                                    </VBox>
                                    <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Teléfono Secundario" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <TextField fx:id="txtTelefonoSecundario" promptText="+52 (81) 8765-4321" style="-fx-pref-height: 35px;"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                              
                              <!-- Email -->
                              <VBox spacing="5.0">
                                 <children>
                                    <Label text="Correo Electrónico" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                    <TextField fx:id="txtEmail" promptText="ejemplo@dominio.com" style="-fx-pref-height: 35px;" maxWidth="400"/>
                                 </children>
                              </VBox>
                           </children>
                        </VBox>

                        <!-- Sección 3: Dirección -->
                        <VBox spacing="15.0">
                           <children>
                              <Label text="🏠 Dirección" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                              
                              <HBox spacing="15.0">
                                 <children>
                                    <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Calle *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <TextField fx:id="txtDireccionCalle" promptText="Nombre de la calle" style="-fx-pref-height: 35px;"/>
                                       </children>
                                    </VBox>
                                    <VBox spacing="5.0">
                                       <children>
                                          <Label text="Número *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <TextField fx:id="txtDireccionNumero" promptText="123" style="-fx-pref-height: 35px;" prefWidth="100"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                              
                              <HBox spacing="15.0">
                                 <children>
                                    <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Colonia *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <TextField fx:id="txtDireccionColonia" promptText="Colonia o fraccionamiento" style="-fx-pref-height: 35px;"/>
                                       </children>
                                    </VBox>
                                    <VBox spacing="5.0">
                                       <children>
                                          <Label text="CP *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <TextField fx:id="txtDireccionCp" promptText="64000" style="-fx-pref-height: 35px;" prefWidth="100"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                              
                              <HBox spacing="15.0">
                                 <children>
                                    <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Ciudad *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <ComboBox fx:id="cmbDireccionCiudad" promptText="Seleccionar ciudad" style="-fx-pref-height: 35px;" maxWidth="Infinity"/>
                                       </children>
                                    </VBox>
                                    <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Estado *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <ComboBox fx:id="cmbDireccionEstado" promptText="Seleccionar estado" style="-fx-pref-height: 35px;" maxWidth="Infinity"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                           </children>
                        </VBox>

                        <!-- Sección 4: Persona de Contacto de Emergencia -->
                        <VBox spacing="15.0">
                           <children>
                              <Label text="🚨 Persona de Contacto de Emergencia" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                              
                              <VBox spacing="5.0">
                                 <children>
                                    <Label text="Nombre Completo *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                    <TextField fx:id="txtContactoEmergenciaNombre" promptText="Nombre completo del contacto" style="-fx-pref-height: 35px;"/>
                                 </children>
                              </VBox>
                              
                              <HBox spacing="15.0">
                                 <children>
                                    <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Teléfono de Contacto *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <TextField fx:id="txtContactoEmergenciaTelefono" promptText="+52 (81) 1111-2222" style="-fx-pref-height: 35px;"/>
                                       </children>
                                    </VBox>
                                    <VBox spacing="5.0">
                                       <children>
                                          <Label text="Relación *" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <ComboBox fx:id="cmbContactoEmergenciaRelacion" promptText="Seleccionar" style="-fx-pref-height: 35px;" prefWidth="150"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                           </children>
                        </VBox>

                        <!-- Sección 5: Seguro Médico -->
                        <VBox spacing="15.0">
                           <children>
                              <Label text="🏥 Seguro Médico" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                              
                              <HBox spacing="15.0">
                                 <children>
                                    <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Aseguradora" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <ComboBox fx:id="cmbSeguroMedico" promptText="Seleccionar aseguradora" style="-fx-pref-height: 35px;" maxWidth="Infinity"/>
                                       </children>
                                    </VBox>
                                    <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label text="Número de Póliza" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                                          <TextField fx:id="txtNumeroPoliza" promptText="Número de la póliza" style="-fx-pref-height: 35px;"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                           </children>
                        </VBox>

                        <!-- Botones de Acción -->
                        <HBox spacing="20.0" alignment="CENTER">
                           <children>
                              <Button fx:id="btnCancelar" text="Cancelar" style="-fx-background-color: #F5F5F5; -fx-text-fill: #7A7A7A; -fx-pref-width: 140; -fx-pref-height: 45; -fx-font-weight: bold; -fx-font-size: 14px; -fx-border-color: #E0E0E0; -fx-border-radius: 8; -fx-background-radius: 8; -fx-cursor: hand;" onAction="#handleCancelar"/>
                              <Button fx:id="btnGuardarContinuar" text="💾 Guardar y Continuar" style="-fx-background-color: linear-gradient(to right, #2E5984, #4A90E2); -fx-text-fill: #FFFFFF; -fx-pref-width: 220; -fx-pref-height: 45; -fx-font-weight: bold; -fx-font-size: 14px; -fx-background-radius: 8; -fx-cursor: hand; -fx-effect: dropshadow(three-pass-box, rgba(46, 89, 132, 0.3), 8, 0, 0, 2);" onAction="#handleGuardarContinuar"/>
                           </children>
                           <VBox.margin>
                              <Insets top="25.0" />
                           </VBox.margin>
                        </HBox>
                     </children>
                  </VBox>
                  
                  <!-- Panel Lateral Derecho -->
                  <VBox prefWidth="320.0" spacing="20.0">
                     <children>
                        <!-- Panel de Progreso -->
                        <VBox spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                           <children>
                              <Label text="📊 Progreso" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                              
                              <HBox alignment="CENTER_LEFT" spacing="10.0">
                                 <children>
                                    <Label text="✅" style="-fx-font-size: 18px;"/>
                                    <VBox>
                                       <children>
                                          <Label text="1. Registro de Paciente" style="-fx-font-weight: bold; -fx-text-fill: #4CAF50;"/>
                                          <Label text="Captura de datos básicos" style="-fx-font-size: 11px; -fx-text-fill: #666666;"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                              
                              <HBox alignment="CENTER_LEFT" spacing="10.0">
                                 <children>
                                    <Label text="⏳" style="-fx-font-size: 18px;"/>
                                    <VBox>
                                       <children>
                                          <Label text="2. Evaluación Médica" style="-fx-font-weight: bold; -fx-text-fill: #666666;"/>
                                          <Label text="Triage y clasificación" style="-fx-font-size: 11px; -fx-text-fill: #666666;"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                              
                              <HBox alignment="CENTER_LEFT" spacing="10.0">
                                 <children>
                                    <Label text="⏳" style="-fx-font-size: 18px;"/>
                                    <VBox>
                                       <children>
                                          <Label text="3. Atención Médica" style="-fx-font-weight: bold; -fx-text-fill: #666666;"/>
                                          <Label text="Consulta con especialista" style="-fx-font-size: 11px; -fx-text-fill: #666666;"/>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                              
                              <ProgressBar progress="0.33" prefWidth="280.0" style="-fx-accent: #4CAF50;"/>
                              <Label text="Completado: 1/3 pasos" style="-fx-font-size: 12px; -fx-text-fill: #666666;"/>
                           </children>
                        </VBox>
                        
                        <!-- Panel de Nivel Asignado -->
                        <VBox spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                           <children>
                              <Label text="🏥 Nivel Asignado" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                              <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: #E8F5E8; -fx-background-radius: 8; -fx-padding: 15;">
                                 <children>
                                    <Label fx:id="lblNivelAsignado" text="PENDIENTE DE EVALUACIÓN" style="-fx-font-weight: bold; -fx-text-fill: #2E7D32; -fx-font-size: 14px;"/>
                                    <Label fx:id="lblDescripcionNivel" text="El paciente será evaluado por el médico de triage" style="-fx-font-size: 11px; -fx-text-fill: #666666; -fx-text-alignment: center;" wrapText="true"/>
                                 </children>
                              </VBox>
                           </children>
                        </VBox>
                        
                        <!-- Panel de Información -->
                        <VBox spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                           </padding>
                           <children>
                              <Label text="💡 Información" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
                              <VBox spacing="8.0">
                                 <children>
                                    <Label text="• Campos marcados con * son obligatorios" style="-fx-font-size: 12px; -fx-text-fill: #666666;"/>
                                    <Label text="• La CURP debe tener 18 caracteres" style="-fx-font-size: 12px; -fx-text-fill: #666666;"/>
                                    <Label text="• El contacto de emergencia es requerido" style="-fx-font-size: 12px; -fx-text-fill: #666666;"/>
                                    <Label text="• El seguro médico es opcional" style="-fx-font-size: 12px; -fx-text-fill: #666666;"/>
                                 </children>
                              </VBox>
                           </children>
                        </VBox>
                     </children>
                  </VBox>
               </children>
            </HBox>
         </content>
      </ScrollPane>
   </children>
</AnchorPane>